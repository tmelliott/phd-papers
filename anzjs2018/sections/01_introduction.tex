\section{Introduction}
\label{sec:intro}


In public transport, \rt information (RTI), such as estimated times of arrival (ETAs),
keeps transport users informed about their journey,
and enabled them to make decisions about the best route.
It has also been shown that perceived waiting time is less
when arrival time information is available \citep{TCRP_2003b}.
Unfortunately, here in Auckland, RTI is highly unreliable,
and succumbs to several problems that public transport users
are all too familiar with.
Inaccurate ETAs are a major source of frustration,
as they tend to either increase or decrease over time 
as the bus gets progressively later or earlier due to traffic congestion, 
or simply due to poor schedule calibration.
Furthermore, buses are shown as \emph{on-time} 
if they are not present in the \rt system and have not been cancelled,
so ETAs are based solely on scheduled arrival times;
if the bus does not show up on time
the service is removed from the \rt board,
leaving passengers unsure as to when---if at all---their bus will show up,
a phenomenon termed by bus users as ``ghost buses''.


Arrival time prediction is only as reliable as the underlying model,
and while a lot of work has gone into developing public transport vehicle models
\citep{Cathey_2003,Jeong_2005,Yu_2011,Hans_2015},
in many public transport systems no formal model is used.
Instead, ETAs are solely based on the scheduled arrival time
adjusted by the vehicle's delay at the most recent stop, if available.
This assumes that the schedule is valid,
and that there is no unusual congestion along the route,
neither of which are valid assumptions,
particularly in our test area of Auckland, New Zealand,
where infrastructure for buses (such as priority lanes) is limited.


To avoid the problems mentioned above,
a more robust modelling and prediction framework is required.
This should consist of a robust vehicle model to estimate the position and speed
of transit vehicles from \rt GPS data,
and a way to incorporate road congestion information 
into the arrival time predictions.
Several vehicle modelling approaches were explored, 
including the Kalman filter \citep{Dailey_2001,Cathey_2003},
machine learning models \citep{Yu_2006,Chang_2010},
and a particle filter \citep{Hans_2015}.
We chose to use a particle filter for several reasons,
which are discussed in Section~\ref{sec:pf}.


The next step involves estimating traffic conditions throughtout the transport network
using the information obtained from the GPS data. 
\cite{Yu_2010} improved prediction accuracy by using the travel times
of buses travelling along the same route.
A similar method presented by \cite{Hans_2015}
used headway, the time between consecutive vehicles at a point on the route,
as a predictor of travel time.
Since these approaches only work well on high frequency routes,
\cite{Yu_2011} showed further improvements by combining travel times 
from several routes;
however, this was limited to predefined converging routes.
In general, however, no comprehensive network modelling approach has been proposed using
solely GPS position data to model and account for congestion when estimating arrival times.


In Section~\ref{sec:models} of this paper, 
we describe the \rt vehicle and network state models
used to estimate traffic congestion using the transit vehicles
travelling through the network in real-time,
and in Section~\ref{sec:rt} we demonstrate the feasibility of using a particle filter
in \rt to model transit vehicles,
and evaluate its performance.
First, however, we descibe how we construct a
road network from GTFS data in Section~\ref{sec:gtfs}.



